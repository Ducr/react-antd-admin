import{u as w,j as o,B as f,e as i,q as M}from"./index-Cbsp0YmZ.js";import{f as k,D as R,a as S}from"./detail-DjGib_C4.js";import{B as $}from"./index-DWaz6cyR.js";import{B as g}from"./index-qykM4t-_.js";import{u as I}from"./index-DE54v8aC.js";import{a as n}from"./react-UQ1dNgW8.js";import{getConstantColumns as O}from"./constants-xapvxIwD.js";import{aI as P,B as q,aJ as v}from"./antd-BreSrAtA.js";import"./faker-Dcf0Eyuj.js";import"./index-6XyIMZhQ.js";import"./index-gt73_I26.js";import"./BaseForm-BRbvv5mA.js";import"./index-r91jwUje.js";import"./index-Cod2GCDZ.js";import"./index-BJi9Q40Z.js";import"./index-Cj1tMjit.js";function Y(){const{t:e}=w(),{hasAccessByCodes:m}=I(),[h,l]=n.useState(!1),[x,c]=n.useState(""),[y,u]=n.useState({}),[B,C]=n.useState([]),d=n.useRef(null),T=async(a,t)=>{var s,p;const r=await S(a);await((s=t==null?void 0:t.reload)==null?void 0:s.call(t)),(p=window.$message)==null||p.success(`${e("common.deleteSuccess")} id = ${r.result}`)},j=[...O(e),{title:e("common.action"),valueType:"option",key:"option",width:120,fixed:"right",render:(a,t,r,s)=>[o.jsx(f,{type:"link",size:"small",disabled:!m(i.update),onClick:async()=>{l(!0),c(e("system.menu.editMenu")),u({...t})},children:e("common.edit")},"editable"),o.jsx(P,{title:e("common.confirmDelete"),onConfirm:()=>T(t.id,s),okText:e("common.confirm"),cancelText:e("common.cancel"),children:o.jsx(f,{type:"link",size:"small",disabled:!m(i.delete),children:e("common.delete")})},"delete")]}],D=()=>{l(!1),u({})},b=()=>{var a;(a=d.current)==null||a.reload()};return o.jsxs($,{className:"h-full",children:[o.jsx(g,{adaptive:!0,columns:j,actionRef:d,request:async a=>{const t=await k(a),r=M(t.result.list);return C(t.result.list.filter(s=>Number(s.menuType)===0).map(s=>({...s,name:e(s.name)}))),{...t,data:r,total:t.result.total}},headerTitle:`${e("common.menu.menu")} （${e("common.demoOnly")}）`,toolBarRender:()=>[o.jsx(q,{icon:o.jsx(v,{}),type:"primary",disabled:!m(i.add),onClick:()=>{l(!0),c(e("system.menu.addMenu"))},children:e("common.add")},"add-role")]}),o.jsx(R,{title:x,open:h,flatParentMenus:B,onCloseChange:D,detailData:y,refreshTable:b})]})}export{Y as default};
